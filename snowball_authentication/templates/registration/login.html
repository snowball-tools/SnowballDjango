{% extends 'base.html' %}

{% load static %}

{% block content %}

<meta name="appleid-signin-client-id" content="xyz.mobiletools.MobileToolsAuth.serviceid">
<meta name="appleid-signin-redirect-uri" content="https://www.mobiletools.xyz/complete/apple-id/">
<meta name="appleid-signin-use-popup" content="true">
<meta name="appleid-signin-scope" content="email">
<link rel="stylesheet" href="{% static 'snowball_authentication/css/login.css' %}">
<div id="{{ post.slug }}" class="snowball-window">
    <div class="title-bar">
        <div class="button close-button"></div>
        <div class="button minimize-button"></div>
        <div class="button maximize-button"></div>
        Login
    </div>
    <div class="snowball-window-content">
        <div class="login-container">
            <a href="{% url 'social:begin' 'apple-id' %}" class="apple-button">
                <svg class="apple-logo" width="24" height="25" viewBox="0 0 24 25" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M21.2806 18.924C20.9328 19.7275 20.5211 20.4672 20.0441 21.1472C19.3939 22.0743 18.8615 22.716 18.4512 23.0724C17.8151 23.6573 17.1337 23.9568 16.4039 23.9739C15.8801 23.9739 15.2483 23.8248 14.5129 23.5224C13.7751 23.2214 13.097 23.0724 12.477 23.0724C11.8268 23.0724 11.1294 23.2214 10.3835 23.5224C9.63647 23.8248 9.03466 23.9824 8.57453 23.998C7.87475 24.0278 7.17725 23.7198 6.48102 23.0724C6.03665 22.6848 5.48084 22.0204 4.81499 21.0791C4.1006 20.0739 3.51326 18.9084 3.05313 17.5795C2.56035 16.1442 2.31332 14.7543 2.31332 13.4087C2.31332 11.8673 2.64639 10.5379 3.31351 9.42385C3.83781 8.52901 4.53531 7.82313 5.40829 7.30494C6.28127 6.78674 7.22453 6.52268 8.24033 6.50578C8.79615 6.50578 9.52502 6.67771 10.4308 7.0156C11.334 7.35463 11.914 7.52655 12.1682 7.52655C12.3583 7.52655 13.0026 7.32552 14.0948 6.92474C15.1276 6.55306 15.9993 6.39916 16.7134 6.45979C18.6485 6.61595 20.1023 7.37876 21.0691 8.75304C19.3385 9.80164 18.4824 11.2703 18.4994 13.1544C18.5151 14.622 19.0474 15.8432 20.0938 16.8129C20.568 17.2629 21.0975 17.6107 21.6867 17.8578C21.5589 18.2283 21.424 18.5832 21.2806 18.924V18.924ZM16.8426 1.46014C16.8426 2.6104 16.4224 3.6844 15.5848 4.67848C14.5739 5.86024 13.3513 6.54312 12.0254 6.43537C12.0085 6.29737 11.9987 6.15213 11.9987 5.99952C11.9987 4.89527 12.4794 3.7135 13.3331 2.74725C13.7593 2.25801 14.3014 1.85123 14.9587 1.52672C15.6146 1.20706 16.235 1.03028 16.8185 1.00001C16.8355 1.15378 16.8426 1.30756 16.8426 1.46012V1.46014Z"
                        fill="white" />
                </svg>
                <div class="continue-with-apple">Continue with Apple</div>
            </a>
            <a href="{% url 'social:begin' 'google-oauth2' %}" class="google-button">
                <div class="google-logo">
                    <svg class="logo-googleg-48-dp" width="24" height="23" viewBox="0 0 24 23" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M23.04 11.7614C23.04 10.9459 22.9668 10.1618 22.8309 9.40909H12V13.8575H18.1891C17.9225 15.295 17.1123 16.513 15.8943 17.3284V20.2139H19.6109C21.7855 18.2118 23.04 15.2636 23.04 11.7614Z"
                            fill="#4285F4" />
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M11.9999 22.9998C15.1049 22.9998 17.7081 21.9701 19.6108 20.2137L15.8942 17.3282C14.8645 18.0182 13.5472 18.426 11.9999 18.426C9.00469 18.426 6.46946 16.403 5.56514 13.6848H1.7231V16.6644C3.61537 20.4228 7.50446 22.9998 11.9999 22.9998Z"
                            fill="#34A853" />
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M5.56523 13.6851C5.33523 12.9951 5.20455 12.258 5.20455 11.5001C5.20455 10.7421 5.33523 10.0051 5.56523 9.31506V6.33552H1.72318C0.944318 7.88802 0.5 9.64438 0.5 11.5001C0.5 13.3557 0.944318 15.1121 1.72318 16.6646L5.56523 13.6851Z"
                            fill="#FBBC05" />
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M11.9999 4.57386C13.6883 4.57386 15.2042 5.15409 16.3961 6.29364L19.6945 2.99523C17.7029 1.13955 15.0997 0 11.9999 0C7.50446 0 3.61537 2.57705 1.7231 6.33545L5.56514 9.315C6.46946 6.59682 9.00469 4.57386 11.9999 4.57386Z"
                            fill="#EA4335" />
                    </svg>
                </div>
                <div class="continue-with-google">Continue with Google</div>
            </a>
            <a href="{% url 'social:begin' 'facebook' %}" class="facebook-button">
                <svg class="facebook-logo" width="24" height="25" viewBox="0 0 24 25" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M23.5 12.5698C23.5 6.21857 18.3513 1.06985 12 1.06985C5.64872 1.06985 0.5 6.21857 0.5 12.5698C0.5 18.3098 4.70538 23.0674 10.2031 23.9301V15.8941H7.2832V12.5698H10.2031V10.0363C10.2031 7.15407 11.92 5.56204 14.5468 5.56204C15.805 5.56204 17.1211 5.78665 17.1211 5.78665V8.61672H15.671C14.2424 8.61672 13.7969 9.50319 13.7969 10.4126V12.5698H16.9863L16.4765 15.8941H13.7969V23.9301C19.2946 23.0674 23.5 18.3098 23.5 12.5698Z"
                        fill="white" />
                </svg>
                <div class="continue-with-facebook">Continue with Facebook</div>
            </a>
            <form action="{% url 'snowball_authentication:login' %}" method="post" id="loginForm">
                {% csrf_token %}
                <!-- <input type="text" class="form-control" placeholder="passkey" autocomplete="webauthn"
                    autofocus="autofocus"> -->
                <input type="hidden" name="passkeys" id="passkeys" />
                <button class="passkey-button" onclick="authn('loginForm')">
                    <div class="person-badge-key-fill-1">
                        <svg class="group" width="25" height="23" viewBox="0 0 25 23" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M10.4205 11.3763C12.9536 11.3763 15.1333 9.11411 15.1333 6.16861C15.1333 3.25845 12.9418 1.10234 10.4205 1.10234C7.89914 1.10234 5.70766 3.30558 5.70766 6.19218C5.70766 9.11411 7.89914 11.3763 10.4205 11.3763ZM2.51473 22.2865H18.2084C18.067 22.0037 17.9963 21.6973 17.9963 21.3675V16.9256C17.4425 16.4897 17.0067 15.9359 16.7003 15.3115C15.0979 14.2275 12.9654 13.4853 10.4205 13.4853C4.30559 13.4853 0.5 17.6797 0.5 20.7194C0.5 21.6973 1.25405 22.2865 2.51473 22.2865ZM20.9183 8.85492C18.9035 8.85492 17.313 10.4573 17.313 12.4366C17.313 13.9565 18.2202 15.2643 19.5986 15.8063V21.3675C19.5986 21.5088 19.6694 21.6031 19.7636 21.7209L20.7062 22.6752C20.8122 22.7813 20.9772 22.793 21.1067 22.6752L22.8858 20.8844C23.0155 20.7666 23.0155 20.6134 22.8858 20.4956L21.7784 19.3763L23.3218 17.8799C23.4278 17.7622 23.4161 17.6089 23.2983 17.4676L21.7902 15.9595C23.5221 15.2643 24.5 13.9919 24.5 12.4366C24.5 10.4573 22.8976 8.85492 20.9183 8.85492ZM20.9065 10.5398C21.5074 10.5398 22.0022 11.0464 22.0022 11.6473C22.0022 12.2717 21.5074 12.7665 20.9065 12.7665C20.2938 12.7665 19.7872 12.2717 19.7872 11.6473C19.7872 11.0464 20.2821 10.5398 20.9065 10.5398Z"
                                fill="white" fill-opacity="0.85" />
                        </svg>
                    </div>
                    <div class="continue-with-passkeys">Continue with Passkeys</div>
                </button>
            </form>
        </div>
    </div>
</div>

{% include 'passkeys.js' %}
<script type="application/javascript">
    window.onload = checkConditionalUI('loginForm');
</script>
{% endblock %}